<div class="page-container">
    <div class="page-header">
        <h2>Détails de l'Acte</h2>
        <div class="flex gap-2">
            <p-button label="Retour" icon="pi pi-arrow-left" severity="secondary" (click)="goBack()"></p-button>
            <p-button *ngIf="!acte?.cloture" label="Modifier" icon="pi pi-pencil" (click)="editActe()"></p-button>
            <p-button *ngIf="!acte?.cloture" label="Clôturer" icon="pi pi-lock" severity="warn"
                (click)="closeActe()"></p-button>
        </div>
    </div>

    <div *ngIf="acte" class="grid gap-4">
        <p-card header="Informations générales">
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <strong>Numéro:</strong>
                    <p>{{acte.numeroActe}}</p>
                </div>
                <div>
                    <strong>Type:</strong>
                    <p>{{acte.type}}</p>
                </div>
                <div>
                    <strong>Date:</strong>
                    <p>{{acte.dateActe | date:'mediumDate'}}</p>
                </div>
                <div>
                    <strong>Status:</strong>
                    <p-tag [value]="acte.cloture ? 'Clôturé' : 'En cours'"
                        [severity]="acte.cloture ? 'success' : 'info'"></p-tag>
                </div>
            </div>
        </p-card>

        <p-card header="Parties">
            <p-table [value]="acte.parties">
                <ng-template pTemplate="header">
                    <tr>
                        <th>Qualité</th>
                        <th>Client</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-partie>
                    <tr>
                        <td>{{partie.qualite}}</td>
                        <td>{{partie.clientNom}}</td>
                    </tr>
                </ng-template>
            </p-table>
        </p-card>
    </div>

    <div *ngIf="loading && !acte" class="text-center p-4">
        <i class="pi pi-spin pi-spinner" style="font-size: 2rem"></i>
        <p class="mt-2">Chargement des détails de l'acte...</p>
    </div>
</div>